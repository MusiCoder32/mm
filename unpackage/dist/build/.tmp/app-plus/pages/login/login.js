(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"13ff":function(t,e,n){},"392c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;r(n("bcac"));var o=n("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){a(t,e,n[e])})}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={data:function(){return{backroute:"",phoneNumber:"",passwd:"",isShowOauth:!1,showProvider:{weixin:!1,qq:!1,sinaweibo:!1,xiaomi:!1}}},onShow:function(){},onLoad:function(t){this.isShowOauth=!0,this.getProvider(),this.backroute=t.backroute},onBackPress:function(t){return this.onreturn(),!0},methods:i({},(0,o.mapMutations)(["login"]),{onreturn:function(){t.reLaunch({url:"/pages/tabBar/home/home"})},oauthLogin:function(e){t.showLoading(),t.login({provider:e,success:function(n){console.log("success: "+JSON.stringify(n)," at pages\\login\\login.vue:88"),t.getUserInfo({provider:e,success:function(e){console.log("用户信息："+JSON.stringify(e.userInfo)," at pages\\login\\login.vue:93"),t.setStorage({key:"UserInfo",data:{username:e.userInfo.nickName,face:e.userInfo.avatarUrl,signature:"个性签名",integral:0,balance:0,envelope:0},success:function(){t.hideLoading(),t.showToast({title:"登录成功",icon:"success"}),setTimeout(function(){t.navigateBack()},300)}})}})},fail:function(t){console.log("fail: "+JSON.stringify(t)," at pages\\login\\login.vue:119")}})},getProvider:function(){var e=this;t.getProvider({service:"oauth",success:function(t){for(var n=t.provider.length,o=0;o<n;o++)e.showProvider[t.provider[o]]=!0;0==t.provider.length&&(e.isShowOauth=!1)}})},toPage:function(e){t.hideKeyboard(),t.navigateTo({url:e+"?backroute="+this.backroute})},doLogin:function(){var e=this;if(t.hideKeyboard(),!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber))return t.showToast({title:"请填写正确手机号码",icon:"none"}),!1;if(!/((?=.*\d)(?=.*\D)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z]))^.{6,12}$/.test(this.passwd.trim()))return this.$api.msg(this.$i18n.passwdError),!1;var n={mobile:this.phoneNumber,password:this.passwd};this.$Request.post(this.$Urlconf.login.signin,n).then(function(n){0==n.code&&(n.data.user_text.head_portrait&&0==n.data.user_text.portrait_type&&(n.data.user_text.head_portrait=e.$RootHttp.APIHOST+e.$RootHttp.IMGPATH+n.data.user_text.head_portrait),e.login(n.data),e.backroute=e.backroute||e.$RootHttp.DEFAULTPAGE,t.reLaunch({url:"/"+e.backroute,success:function(t){},fail:function(){},complete:function(){}}),e.$Request.post(e.$Urlconf.user.getUserAddress).then(function(e){console.log(e," at pages\\login\\login.vue:217"),0==e.code&&t.setStorage({key:"addressList",data:e.data})}))})}})};e.default=s}).call(this,n("6e42")["default"])},"3ba7":function(t,e,n){"use strict";n.r(e);var o=n("392c"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=r.a},"5cda":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r})},"8f04":function(t,e,n){"use strict";var o=n("13ff"),r=n.n(o);r.a},e76a:function(t,e,n){"use strict";n.r(e);var o=n("5cda"),r=n("3ba7");for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);n("8f04");var a=n("2877"),s=Object(a["a"])(r["default"],o["a"],o["b"],!1,null,null,null);e["default"]=s.exports}},[["46d7","common/runtime","common/vendor"]]]);